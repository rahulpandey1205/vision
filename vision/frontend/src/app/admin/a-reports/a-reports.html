<div class="container">
  <app-a-sidebar></app-a-sidebar>
  
  <main class="main-content">
    <!-- Header Bar -->
    <div class="header-bar">
      <div class="welcome-section">
        <h1>Visitor Analytics</h1>
        <p>Comprehensive reports and visitor insights</p>
      </div>
      
      <div class="header-actions">
        <div class="notification-bell">
          <i class="fas fa-bell"></i>
          <span class="notification-badge">3</span>
        </div>
        
        <div class="user-profile">
          <div class="user-avatar">AD</div>
          <span>Admin</span>
        </div>
      </div>
    </div>

    <!-- Metrics Grid -->
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-title">Total Visitors</div>
        <div class="metric-value">1,247</div>
        <div class="metric-change up">
          <i class="fas fa-arrow-up"></i> 12% from last week
        </div>
      </div>
      
      <div class="metric-card">
        <div class="metric-title">Avg. Duration</div>
        <div class="metric-value">42m</div>
        <div class="metric-change down">
          <i class="fas fa-arrow-down"></i> 5% change
        </div>
      </div>
      
      <div class="metric-card">
        <div class="metric-title">Peak Time</div>
        <div class="metric-value">10-11 AM</div>
        <div class="metric-value-sub">28% of visits</div>
      </div>
      
      <div class="metric-card">
        <div class="metric-title">Top Purpose</div>
        <div class="metric-value">Meeting</div>
        <div class="metric-value-sub">42% of visits</div>
      </div>
    </div>

    <!-- Report Filters -->
    <div class="report-filters">
      <div class="filter-group">
        <label>Time Frame</label>
        <div class="filter-options">
          <button *ngFor="let timeframe of timeframes" 
                  [class.active]="selectedTimeframe === timeframe.value"
                  (click)="selectedTimeframe = timeframe.value; updateChart()">
            {{ timeframe.label }}
          </button>
        </div>
      </div>
      
      <div class="filter-group">
        <label>Report Type</label>
        <div class="filter-options">
          <button *ngFor="let type of reportTypes" 
                  [class.active]="selectedReportType === type.value"
                  (click)="selectedReportType = type.value; updateChart()">
            {{ type.label }}
          </button>
        </div>
      </div>
    </div>

    <!-- Chart Section -->
    <div class="chart-card">
      <div class="chart-header">
        <h2>Visitor Trends</h2>
        <div class="chart-controls">
          <select [(ngModel)]="chartType" (change)="updateChart()" class="chart-select">
            <option value="bar">Bar Chart</option>
            <option value="line">Line Chart</option>
          </select>
          <button class="export-btn" (click)="exportReport('pdf')">
            <i class="fas fa-file-pdf"></i> Export PDF
          </button>
        </div>
      </div>
      <div class="chart-container">
        <canvas baseChart
          [data]="chartData"
          [type]="chartType"
          [options]="chartOptions">
        </canvas>
      </div>
    </div>

    <!-- Recent Visits Table -->
    <div class="recent-checkins">
      <div class="section-title">
        <h2>Recent Visits</h2>
        <div class="table-actions">
          <a href="#" class="view-all">View All</a>
          <button class="export-btn" (click)="exportReport('csv')">
            <i class="fas fa-file-csv"></i> Export CSV
          </button>
        </div>
      </div>
      
      <div class="table-responsive">
        <table>
          <thead>
            <tr>
              <th>Date</th>
              <th>Visitor</th>
              <th>Host</th>
              <th>Purpose</th>
              <th>Check-In</th>
              <th>Check-Out</th>
              <th>Duration</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let visit of visits">
              <td>{{visit.date | date:'shortDate'}}</td>
              <td>{{visit.visitor}}</td>
              <td>{{visit.host}}</td>
              <td>{{visit.purpose}}</td>
              <td>{{visit.checkIn}}</td>
              <td>{{visit.checkOut}}</td>
              <td>{{visit.duration}}m</td>
              <td>
                <span class="status-badge" [ngClass]="{
                  'completed': visit.status === 'Completed',
                  'checked-out': visit.status === 'Checked Out',
                  'overdue': visit.status === 'Overdue'
                }">
                  {{visit.status}}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>
</div>